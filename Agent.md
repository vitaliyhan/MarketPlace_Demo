# Marketplace Demo Project

## Описание проекта

Marketplace Demo - это веб-приложение для онлайн-маркетплейса, разработанное на Java с использованием Spring Boot фреймворка. Приложение позволяет пользователям регистрироваться, создавать и просматривать объявления о продаже товаров.

## Технологии

- **Java 21** - основная версия Java
- **Spring Boot 3.3.0** - фреймворк для создания веб-приложений
- **Spring Security** - аутентификация и авторизация пользователей
- **Spring Data JPA** - работа с базой данных
- **PostgreSQL** - реляционная база данных
- **Freemarker** - шаблонизатор для представлений
- **Maven** - система сборки проекта
- **Docker** - контейнеризация приложения
- **Lombok** - библиотека для уменьшения boilerplate кода

## Архитектура

Проект построен по классической MVC (Model-View-Controller) архитектуре:

### Модели данных (Models)
- **User** - модель пользователя с интеграцией Spring Security
- **Product** - модель товара с ценой, описанием, городом
- **Image** - модель изображений товаров
- **Role** - перечисление ролей пользователей (USER, ADMIN)

### Контроллеры (Controllers)
- **ProductController** - управление товарами (создание, просмотр, удаление)
- **UserController** - управление пользователями и профилями
- **AdminController** - административные функции
- **ImageController** - работа с изображениями

### Сервисы (Services)
- **ProductService** - бизнес-логика для работы с товарами
- **UserService** - бизнес-логика для работы с пользователями
- **MyUserDetailsService** - интеграция с Spring Security

### Репозитории (Repositories)
- **ProductRepository** - доступ к данным товаров
- **UserRepository** - доступ к данным пользователей
- **ImageRepository** - доступ к данным изображений

## Основная функциональность

### Для пользователей:
- Регистрация и аутентификация
- Просмотр всех товаров на главной странице
- Поиск товаров по названию
- Просмотр детальной информации о товаре
- Создание новых товаров с загрузкой изображений
- Управление своими товарами (просмотр, удаление)
- Редактирование профиля

### Для администраторов:
- Доступ к административной панели
- Управление пользователями
- Просмотр всех товаров в системе

## Безопасность

- **Spring Security** обеспечивает защиту приложения
- Двухфакторная аутентификация через email и пароль
- Ролевая модель доступа (USER, ADMIN)
- Шифрование паролей с помощью BCrypt
- Защита от несанкционированного доступа к ресурсам

## База данных

- **PostgreSQL** как основная СУБД
- Автоматическое создание/обновление схемы через Hibernate
- Связи между таблицами:
  - User ↔ Product (один ко многим)
  - Product ↔ Image (один ко многим)
  - User ↔ Role (многие ко многим)

## Конфигурация

### Локальная разработка:
- База данных: PostgreSQL на localhost:5432
- База данных: buysell
- Пользователь: postgres

### Docker:
- Контейнеризация приложения и базы данных
- Docker Compose для оркестрации сервисов
- Автоматическая проверка здоровья базы данных

## Структура проекта

```
src/
├── main/
│   ├── java/com/example/mktplace/
│   │   ├── configurations/     # Конфигурации Spring
│   │   ├── controller/         # Контроллеры MVC
│   │   ├── models/             # Модели данных JPA
│   │   ├── repositories/       # Репозитории данных
│   │   ├── services/           # Бизнес-логика
│   │   └── MktplaceApplication.java
│   ├── resources/
│   │   ├── static/             # Статические ресурсы (CSS, images)
│   │   ├── templates/          # Шаблоны Freemarker
│   │   └── application.properties
│   └── docker/                 # Docker конфигурация
└── test/                       # Тесты
```

## Запуск проекта

### Локально:
```bash
mvn spring-boot:run
```

### Через Docker:
```bash
docker-compose up --build
```

## Особенности реализации

- **File Upload**: Поддержка загрузки до 3 изображений на товар
- **Preview Images**: Система превью изображений для товаров
- **Search**: Поиск товаров по названию
- **User Management**: Полноценная система управления пользователями
- **Responsive UI**: Адаптивный интерфейс с использованием CSS
- **Email Integration**: Готовность к интеграции с email сервисом (Spring Boot Mail)

## Цели проекта

Данный проект является демонстрационным примером полнофункционального веб-приложения маркетплейса, демонстрирующим:

- Современные подходы к разработке на Java
- Интеграцию Spring экосистемы
- Безопасную разработку веб-приложений
- Работу с файлами и изображениями
- Контейнеризацию приложений
- Ролевую модель доступа